<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>ID Card Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    :root {
      --primary-color: #666;
      --secondary-color: #444;
      --accent-color: #444;
      --text-dark: #222;
      --text-medium: #000;
      --text-light: #666;
      --bg-light: #f9f9f9;
    }

    body {
      font-family: 'Noto Sans Bengali', sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
    }

    .container {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      justify-content: center;
    }

    .form-container {
      background: white;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 800px;
      margin-bottom: 30px;
    }

    h1 {
      text-align: center;
      color: var(--primary-color);
      margin-bottom: 30px;
      font-weight: 600;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--secondary-color);
    }

    input, select {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-family: 'Noto Sans Bengali', sans-serif;
      font-size: 16px;
    }

    .form-row {
      display: flex;
      gap: 20px;
    }

    .form-col {
      flex: 1;
    }

    button {
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: background-color 0.3s;
      margin-top: 10px;
    }

    button:hover {
      background-color: var(--secondary-color);
    }

    .button-group {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 30px;
    }

    .id-card {
      width: 380px;
      height: 570px;
      background: #ffffff;
      border-radius: 12px;
      padding: 0;
      box-shadow: 0 12px 30px rgba(0,0,0,0.15);
      position: relative;
      overflow: hidden;
      border: none;
      margin: 5px;
      transition: transform 0.3s ease;
    }

    .id-card:hover {
      transform: translateY(-5px);
    }

    .id-card::before {
      content: "";
      position: absolute;
      top: -80px;
      left: 0;
      width: 96%;
      height: 130%;
      background: url('nahid.jpg') no-repeat center center;
      background-size: 480px;
      opacity: 0.09;
      z-index: 0;
    }

    .header {
      text-align: center;
      padding: 20px 0 15px;
      border-bottom: 1px solid rgba(0,0,0,0.1);
      margin: 0 30px;
      position: relative;
    }

    .logo-title-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 8px;
    }

    .logo {
      height: 44px;
      width: 44px;
      border-radius: 50%;
    }

    .company-name {
      font-size: 22px;
      font-weight: bold;
      margin: 0;
      color: var(--primary-color);
      letter-spacing: 0.1px;
    }

    .company-address {
      font-size: 14px;
      font-weight: 500;
      color: var(--text-light);
      margin: 5px 0 0;
      line-height: 1;
    }

    .id-title {
      font-size: 19px;
      font-weight: 600;
      margin-top: 12px;
      color: var(--secondary-color);
      position: relative;
      display: inline-block;
    }

    .id-title::after {
      content: "";
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 50px;
      height: 2px;
      background: var(--accent-color);
    }

    .photo-section {
      display: flex;
      justify-content: center;
      margin: 15px 0;
      position: relative;
    }

    .photo-frame {
      width: 96px;
      height: 96px;
      border: 1px solid rgba(0,0,0,0.1);
      padding: 4px;
      border-radius: 4px 4px 0 0;
      background: #fff;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      position: relative;
    }

    .photo {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .employee-id {
      position: absolute;
      bottom: -18px;
      left: 0;
      right: 0;
      text-align: center;
      font-size: 13px;
      font-weight: 600;
      background: var(--primary-color);
      color: white;
      padding: 4px 0;
      border-radius: 0 0 4px 4px;
      letter-spacing: 0.5px;
    }

    .details {
      margin: 35px 30px;
    }

    .detail-row {
      margin-bottom: 14px;
      font-size: 15px;
      line-height: 1.5;
      display: flex;
    }

    .detail-title {
      font-weight: 600;
      display: inline-block;
      width: 120px;
      color: var(--text-medium);
      min-width: 120px;
    }

    .detail-value {
      font-weight: 500;
      color: var(--text-dark);
      flex-grow: 1;
    }

    .signature-section {
      display: flex;
      justify-content: space-between;
      margin: 30px 30px 25px;
      border-top: 1px dashed #aaa;
      padding-top: 15px;
    }

    .signature {
      text-align: center;
      font-size: 13px;
      width: 130px;
      color: var(--text-medium);
    }

    .signature-line {
      width: 100px;
      height: 1px;
      background: var(--text-dark);
      margin: 25px auto 8px;
      position: relative;
    }

    .signature-line::after {
      content: "";
      position: absolute;
      top: -3px;
      left: 0;
      width: 100%;
      height: 1px;
      background: var(--text-dark);
    }

    .footer {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      text-align: center;
      font-size: 11px;
      color: var(--text-light);
      padding: 10px 0;
      background: var(--bg-light);
      border-top: 1px solid rgba(0,0,0,0.08);
    }

    /* Back Side */
    .back-header {
      text-align: center;
      padding: 25px 0 20px;
      border-bottom: 1px solid rgba(0,0,0,0.1);
      margin: 0 30px;
      position: relative;
    }

    .back-header::after {
      content: "";
      position: absolute;
      bottom: -1px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 3px;
      background: var(--secondary-color);
    }

    .back-section {
      margin: 25px 30px;
    }

    .section-title {
      font-weight: 700;
      font-size: 17px;
      color: var(--primary-color);
      margin-bottom: 18px;
      padding-bottom: 8px;
      border-bottom: 2px solid var(--accent-color);
      position: relative;
    }

    .section-title::after {
      content: "";
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 30px;
      height: 2px;
      background: var(--secondary-color);
    }

    .back-detail {
      font-size: 14px;
      margin-bottom: 12px;
      line-height: 1.6;
      color: var(--text-medium);
    }

    .back-detail strong {
      font-weight: 600;
      color: var(--text-dark);
      display: inline-block;
      min-width: 120px;
    }

    .validity {
      display: flex;
      justify-content: space-between;
      margin: 30px 30px 15px;
      font-size: 14px;
      font-weight: 500;
      color: var(--text-medium);
      padding-top: 15px;
      border-top: 1px dashed #aaa;
    }

    .validity strong {
      color: var(--text-dark);
    }

    .qr-section {
      position: absolute;
      bottom: 40px;
      right: 7%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-radius: 6px;
      width: 320px;
    }

    .qr-code {
      width: 60px;
      height: 60px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      border-radius: 6px;
      padding: 1px;
    }

    .qr-text {
      font-size: 12px;
      color: #000;
      right: 8%;
      max-width: 240px;
    }

    /* Preview section */
    .preview-section {
      display: flex;
      flex-wrap: wrap;
      gap: 25px;
      justify-content: center;
      padding: 30px;
      margin: 0;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ed 100%);
    }

    /* File upload */
    .file-upload {
      position: relative;
      margin-bottom: 20px;
    }

    .file-upload input {
      opacity: 0;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      cursor: pointer;
    }

    .file-upload-label {
      display: block;
      padding: 12px;
      border: 1px dashed #ddd;
      border-radius: 5px;
      text-align: center;
      cursor: pointer;
      background-color: #f9f9f9;
    }

    .file-upload-label:hover {
      background-color: #f0f0f0;
    }

    /* Preview image */
    .photo-preview {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border: 1px solid #ddd;
      border-radius: 5px;
      margin-top: 10px;
      display: none;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .form-row {
        flex-direction: column;
        gap: 0;
      }
      
      .id-card {
        width: 100%;
        height: auto;
        margin-bottom: 30px;
      }
    }
  </style>
</head>
<body>
  <div class="form-container">
    <h1>নাহিদ ফাইন টেক্সটাইল - কর্মী পরিচয়পত্র জেনারেটর</h1>
    
    <div class="form-row">
      <div class="form-col">
        <div class="form-group">
          <label for="name">Name (English):</label>
          <input type="text" id="name" placeholder="Enter name in English (e.g. Rahim Uddin)">
        </div>
      </div>
      <div class="form-col">
        <div class="form-group">
          <label for="name-bangla">নাম (বাংলা):</label>
          <input type="text" id="name-bangla" placeholder="নাম বাংলায় লিখুন" readonly>
        </div>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-col">
        <div class="form-group">
          <label for="designation">Designation (English):</label>
          <select id="designation">
            <option value="">Select Designation</option>
            <option value="Apprentice (Sewing)">Apprentice (Sewing)</option>
            <option value="Maintenance">Maintenance</option>
            <option value="Weaving">Weaving</option>
            <option value="Dyeing">Dyeing</option>
            <option value="Sewing">Sewing</option>
            <option value="Supervisor">Supervisor</option>
            <option value="Quality Control">Quality Control</option>
            <option value="Manager">Manager</option>
          </select>
        </div>
      </div>
      <div class="form-col">
        <div class="form-group">
          <label for="designation-bangla">পদবী (বাংলা):</label>
          <input type="text" id="designation-bangla" placeholder="পদবী বাংলায়" readonly>
        </div>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-col">
        <div class="form-group">
          <label for="department">Department (English):</label>
          <select id="department">
            <option value="">Select Department</option>
            <option value="Stitching">Stitching</option>
            <option value="Maintenance">Maintenance</option>
            <option value="Weaving">Weaving</option>
            <option value="Dyeing">Dyeing</option>
            <option value="Finishing">Finishing</option>
            <option value="Quality Control">Quality Control</option>
            <option value="Administration">Administration</option>
          </select>
        </div>
      </div>
      <div class="form-col">
        <div class="form-group">
          <label for="department-bangla">বিভাগ/শাখা (বাংলা):</label>
          <input type="text" id="department-bangla" placeholder="বিভাগ বাংলায়" readonly>
        </div>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-col">
        <div class="form-group">
          <label for="work-type">Work Type (English):</label>
          <select id="work-type">
            <option value="">Select Work Type</option>
            <option value="Stitching">Stitching</option>
            <option value="Maintenance">Maintenance</option>
            <option value="Weaving">Weaving</option>
            <option value="Dyeing">Dyeing</option>
            <option value="Finishing">Finishing</option>
            <option value="Inspection">Inspection</option>
          </select>
        </div>
      </div>
      <div class="form-col">
        <div class="form-group">
          <label for="work-type-bangla">কাজের ধরন (বাংলা):</label>
          <input type="text" id="work-type-bangla" placeholder="কাজের ধরন বাংলায়" readonly>
        </div>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-col">
        <div class="form-group">
          <label for="employee-id">Employee ID:</label>
          <input type="text" id="employee-id" placeholder="Enter employee ID (e.g. NF-002189)">
        </div>
      </div>
      <div class="form-col">
        <div class="form-group">
          <label for="blood-group">Blood Group:</label>
          <select id="blood-group">
            <option value="">Select Blood Group</option>
            <option value="A+">A+</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B-">B-</option>
            <option value="AB+">AB+</option>
            <option value="AB-">AB-</option>
            <option value="O+">O+</option>
            <option value="O-">O-</option>
          </select>
        </div>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-col">
        <div class="form-group">
          <label for="join-date">Joining Date:</label>
          <input type="date" id="join-date">
        </div>
      </div>
      <div class="form-col">
        <div class="form-group">
          <label for="nid">National ID:</label>
          <input type="text" id="nid" placeholder="Enter National ID">
        </div>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-col">
        <div class="form-group">
          <label for="emergency-contact">Emergency Contact:</label>
          <input type="text" id="emergency-contact" placeholder="Enter emergency contact number">
        </div>
      </div>
      <div class="form-col">
        <div class="form-group">
          <label for="issue-date">Issue Date:</label>
          <input type="date" id="issue-date">
        </div>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-col">
        <div class="form-group">
          <label for="expiry-date">Expiry Date:</label>
          <input type="date" id="expiry-date">
        </div>
      </div>
      <div class="form-col">
        <div class="form-group">
          <label for="village">Village (Permanent Address):</label>
          <input type="text" id="village" placeholder="Enter village name">
        </div>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-col">
        <div class="form-group">
          <label for="post-office">Post Office (Permanent Address):</label>
          <input type="text" id="post-office" placeholder="Enter post office">
        </div>
      </div>
      <div class="form-col">
        <div class="form-group">
          <label for="upazila">Upazila (Permanent Address):</label>
          <input type="text" id="upazila" placeholder="Enter upazila">
        </div>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-col">
        <div class="form-group">
          <label for="district">District (Permanent Address):</label>
          <input type="text" id="district" placeholder="Enter district">
        </div>
      </div>
      <div class="form-col">
        <div class="file-upload">
          <label for="photo-upload" class="file-upload-label">Upload Employee Photo</label>
          <input type="file" id="photo-upload" accept="image/*">
          <img id="photo-preview" class="photo-preview" alt="Photo Preview">
        </div>
      </div>
    </div>
    
    <div class="button-group">
      <button id="generate-btn">Generate ID Card</button>
      <button id="download-pdf-btn">Download as PDF</button>
      <button id="print-btn">Print ID Card</button>
    </div>
  </div>
  
  <div class="preview-section" id="preview-section" style="display: none;">
    <!-- FRONT SIDE -->
    <div class="id-card" id="front-card">
      <div class="header">
        <div class="logo-title-row">
          <img src="nahid.jpg" alt="logo" class="logo">
          <div class="company-name">নাহিদ ফাইন টেক্সটাইল লিঃ</div>
        </div>
        <div class="company-address">হরিতলা, মাধবপুর, হবিগঞ্জ</div>
        <div class="id-title">কর্মী পরিচয়পত্র</div>
      </div>

      <div class="photo-section">
        <div class="photo-frame">
          <img id="card-photo" src="img.jpg" class="photo" alt="Employee Photo">
          <div class="employee-id" id="card-employee-id">এনএফ-০০২১৮৯</div>
        </div>
      </div>

      <div class="details">
        <div class="detail-row"><span class="detail-title">নাম:</span><span class="detail-value" id="card-name">রহিম উদ্দিন</span></div>
        <div class="detail-row"><span class="detail-title">পদবী:</span><span class="detail-value" id="card-designation">শিক্ষানবিশ (সুইং)</span></div>
        <div class="detail-row"><span class="detail-title">বিভাগ/শাখা:</span><span class="detail-value" id="card-department">স্টিচিং</span></div>
        <div class="detail-row"><span class="detail-title">কাজের ধরন:</span><span class="detail-value" id="card-work-type">স্টিচিং</span></div>
      </div>

      <div class="signature-section">
        <div class="signature">
          <div class="signature-line"></div>
          শ্রমিকের স্বাক্ষর
        </div>
        <div class="signature">
          <div class="signature-line"></div>
          মালিক/ব্যবস্থাপক
        </div>
      </div>
      
      <div class="footer">কার্ড হারানো/চুরি হলে অবিলম্বে HR বিভাগে জানান | ফোন: ০১৭৭১-২৫১০৭২</div>
    </div>

    <!-- BACK SIDE -->
    <div class="id-card" id="back-card">
      <div class="back-header">
        <div class="company-address">কর্মী তথ্যাবলী</div>
      </div>

      <div class="back-section">
        <div class="section-title">ব্যক্তিগত তথ্য</div>
        
        <div class="back-detail"><strong>রক্তের গ্রুপ:</strong> <span id="card-blood-group">ও+</span></div>
        <div class="back-detail"><strong>যোগদানের তারিখ:</strong> <span id="card-join-date">১২-০৫-১৯৮৫</span></div>
        <div class="back-detail"><strong>জাতীয় ID:</strong> <span id="card-nid">১৯৮৫৬৭১৪২০০৩৪</span></div>
        <div class="back-detail"><strong>জরুরী যোগাযোগ:</strong> <span id="card-emergency-contact">০১৬৯৮৭৬৫৪৩২</span></div>
        <div class="back-detail"><strong>জারির তারিখ:</strong> <span id="card-issue-date">০১-০১-২০২৫</span></div>
        <div class="back-detail"><strong>মেয়াদ উত্তীর্ণ:</strong> <span id="card-expiry-date">৩১-১২-২০২৫</span></div>
      </div>

      <div class="back-section">
        <div class="section-title">স্থায়ী ঠিকানা</div>
        <div class="back-detail">গ্রাম: <span id="card-village">চরপাড়া</span>, ডাকঘর: <span id="card-post-office">কাশিমপুর</span></div>
        <div class="back-detail">উপজেলা: <span id="card-upazila">গাজীপুর সদর</span>, জেলা: <span id="card-district">গাজীপুর</span></div>
      </div>

      <div class="qr-section">
        <div class="qr-text">
          উক্ত পরিচয়পত্র হারাইয়া গেলে তাৎক্ষনিক ব্যবস্থাপনা কর্তৃপক্ষকে জানাইতে হইবে।
        </div>
        <img src="qr.png" alt="QR Code" class="qr-code">
      </div>

      <div class="footer">© ২০২৫ নাহিদ ফাইন টেক্সটাইল লিঃ | সকল অধিকার সংরক্ষিত</div>
    </div>
  </div>

  <script>
    // English to Bangla number mapping
    const englishToBanglaNumbers = {
      '0': '০',
      '1': '১',
      '2': '২',
      '3': '৩',
      '4': '৪',
      '5': '৫',
      '6': '৬',
      '7': '৭',
      '8': '৮',
      '9': '৯'
    };

    // English to Bangla text mapping
    const englishToBanglaText = {
      // Designations
      'Apprentice (Sewing)': 'শিক্ষানবিশ (সুইং)',
      'Maintenance': 'মেইনটেন্যান্স',
      'Weaving': 'ওয়েভিং',
      'Dyeing': 'ডাইং',
      'Sewing': 'সুইং',
      'Supervisor': 'সুপারভাইজার',
      'Quality Control': 'কোয়ালিটি কন্ট্রোল',
      'Manager': 'ম্যানেজার',
      
      // Departments
      'Stitching': 'স্টিচিং',
      'Maintenance': 'মেইনটেন্যান্স',
      'Weaving': 'ওয়েভিং',
      'Dyeing': 'ডাইং',
      'Finishing': 'ফিনিশিং',
      'Quality Control': 'কোয়ালিটি কন্ট্রোল',
      'Administration': 'অ্যাডমিনিস্ট্রেশন',
      
      // Work Types
      'Stitching': 'স্টিচিং',
      'Maintenance': 'মেইনটেন্যান্স',
      'Weaving': 'ওয়েভিং',
      'Dyeing': 'ডাইং',
      'Finishing': 'ফিনিশিং',
      'Inspection': 'ইনস্পেকশন'
    };

    // Convert English numbers to Bangla
    function convertToBanglaNumbers(text) {
      if (!text) return '';
      return text.toString().replace(/[0-9]/g, function(match) {
        return englishToBanglaNumbers[match];
      });
    }

    // Convert English text to Bangla
    function convertToBanglaText(text) {
      if (!text) return '';
      return englishToBanglaText[text] || text;
    }

    // Convert English name to Bangla (simple transliteration)
    function convertNameToBangla(name) {
      if (!name) return '';
      
      const transliterationMap = {
        'a': 'আ', 'b': 'ব', 'c': 'ক', 'd': 'ড', 'e': 'ই', 
        'f': 'ফ', 'g': 'গ', 'h': 'হ', 'i': 'ই', 'j': 'জ', 
        'k': 'ক', 'l': 'ল', 'm': 'ম', 'n': 'ন', 'o': 'ও', 
        'p': 'প', 'q': 'ক', 'r': 'র', 's': 'স', 't': 'ট', 
        'u': 'উ', 'v': 'ভ', 'w': 'ও', 'x': 'এক্স', 'y': 'ই', 
        'z': 'জ', 'kh': 'খ', 'gh': 'ঘ', 'ng': 'ঙ', 'ch': 'চ', 
        'jh': 'ঝ', 'ny': 'ঞ', 'th': 'ঠ', 'dh': 'ঢ', 'ph': 'ফ', 
        'bh': 'ভ', 'sh': 'শ', 'shh': 'ষ', 'rh': 'ড়', 'rrh': 'ঢ়'
      };
      
      // This is a very basic implementation - in a real app you'd use a proper transliteration library
      let banglaName = '';
      for (let i = 0; i < name.length; i++) {
        const char = name[i].toLowerCase();
        banglaName += transliterationMap[char] || char;
      }
      
      return banglaName;
    }

    // Format date to DD-MM-YYYY
    function formatDate(dateString) {
      if (!dateString) return '';
      const date = new Date(dateString);
      const day = date.getDate().toString().padStart(2, '0');
      const month = (date.getMonth() + 1).toString().padStart(2, '0');
      const year = date.getFullYear();
      return `${day}-${month}-${year}`;
    }

    // Update Bangla fields when English fields change
    document.getElementById('name').addEventListener('input', function() {
      const englishName = this.value;
      document.getElementById('name-bangla').value = convertNameToBangla(englishName);
    });

    document.getElementById('designation').addEventListener('change', function() {
      const englishDesignation = this.value;
      document.getElementById('designation-bangla').value = convertToBanglaText(englishDesignation);
    });

    document.getElementById('department').addEventListener('change', function() {
      const englishDepartment = this.value;
      document.getElementById('department-bangla').value = convertToBanglaText(englishDepartment);
    });

    document.getElementById('work-type').addEventListener('change', function() {
      const englishWorkType = this.value;
      document.getElementById('work-type-bangla').value = convertToBanglaText(englishWorkType);
    });

    // Handle photo upload
    document.getElementById('photo-upload').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(event) {
          document.getElementById('photo-preview').src = event.target.result;
          document.getElementById('photo-preview').style.display = 'block';
        };
        reader.readAsDataURL(file);
      }
    });

    // Generate ID Card
    document.getElementById('generate-btn').addEventListener('click', function() {
      // Front side
      document.getElementById('card-name').textContent = document.getElementById('name-bangla').value;
      document.getElementById('card-designation').textContent = document.getElementById('designation-bangla').value;
      document.getElementById('card-department').textContent = document.getElementById('department-bangla').value;
      document.getElementById('card-work-type').textContent = document.getElementById('work-type-bangla').value;
      document.getElementById('card-employee-id').textContent = convertToBanglaNumbers(document.getElementById('employee-id').value);
      
      // Back side
      document.getElementById('card-blood-group').textContent = convertToBanglaNumbers(document.getElementById('blood-group').value);
      document.getElementById('card-join-date').textContent = convertToBanglaNumbers(formatDate(document.getElementById('join-date').value));
      document.getElementById('card-nid').textContent = convertToBanglaNumbers(document.getElementById('nid').value);
      document.getElementById('card-emergency-contact').textContent = convertToBanglaNumbers(document.getElementById('emergency-contact').value);
      document.getElementById('card-issue-date').textContent = convertToBanglaNumbers(formatDate(document.getElementById('issue-date').value));
      document.getElementById('card-expiry-date').textContent = convertToBanglaNumbers(formatDate(document.getElementById('expiry-date').value));
      
      // Address
      document.getElementById('card-village').textContent = document.getElementById('village').value;
      document.getElementById('card-post-office').textContent = document.getElementById('post-office').value;
      document.getElementById('card-upazila').textContent = document.getElementById('upazila').value;
      document.getElementById('card-district').textContent = document.getElementById('district').value;
      
      // Photo
      const photoPreview = document.getElementById('photo-preview');
      if (photoPreview.src && photoPreview.style.display !== 'none') {
        document.getElementById('card-photo').src = photoPreview.src;
      }
      
      // Show preview section
      document.getElementById('preview-section').style.display = 'flex';
      
      // Scroll to preview
      document.getElementById('preview-section').scrollIntoView({ behavior: 'smooth' });
    });

    // Download as PDF
    document.getElementById('download-pdf-btn').addEventListener('click', async function() {
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF('p', 'mm', 'a4');
      
      // Add front card
      const frontCard = document.getElementById('front-card');
      const frontCanvas = await html2canvas(frontCard, { scale: 2 });
      const frontImgData = frontCanvas.toDataURL('image/png');
      pdf.addImage(frontImgData, 'PNG', 15, 20, 90, 135);
      
      // Add back card
      const backCard = document.getElementById('back-card');
      const backCanvas = await html2canvas(backCard, { scale: 2 });
      const backImgData = backCanvas.toDataURL('image/png');
      pdf.addImage(backImgData, 'PNG', 105, 20, 90, 135);
      
      // Save PDF
      pdf.save('employee_id_card.pdf');
    });

    // Print ID Card
    document.getElementById('print-btn').addEventListener('click', function() {
      const printWindow = window.open('', '', 'width=900,height=650');
      printWindow.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Print ID Card</title>
          <style>
            body { 
              font-family: Arial, sans-serif; 
              margin: 0; 
              padding: 20px; 
              display: flex; 
              justify-content: center; 
              align-items: center; 
              flex-direction: column;
            }
            .print-container { 
              display: flex; 
              flex-wrap: wrap; 
              justify-content: center; 
              gap: 20px;
              margin-bottom: 20px;
            }
            @media print {
              button { display: none; }
              body { padding: 0; }
            }
          </style>
        </head>
        <body>
          <div class="print-container">
            ${document.getElementById('front-card').outerHTML}
            ${document.getElementById('back-card').outerHTML}
          </div>
          <button onclick="window.print()">Print</button>
          <button onclick="window.close()">Close</button>
        </body>
        </html>
      `);
      printWindow.document.close();
    });

    // Set default dates
    document.getElementById('issue-date').valueAsDate = new Date();
    
    const expiryDate = new Date();
    expiryDate.setFullYear(expiryDate.getFullYear() + 1);
    document.getElementById('expiry-date').valueAsDate = expiryDate;
  </script>
</body>
</html>